
<ol class="breadcrumb">
  <li class="active">Statistics</li>
</ol>

<div class="row">
	<div class="col-md-6">
		<h3 class="h-btn-sm-align">Message Counters - <%= @msg_show_logs.first.test_run.name %></h3>
	</div>
  <div class="col-md-6">
		<%= link_to '<span class="glyphicon glyphicon-refresh"></span> Refresh'.html_safe, msg_show_logs_path(:update => 1, :test_run_id => @msg_show_logs.first.test_run.id), :class => "btn btn-primary btn-sm pull-right" %>
	</div>
</div>

<hr class="hr-condensed"/>

<table class="table table-condensed table-hover">
  <thead>
    <tr>
      <th style="width:60px;">Type</th>
      <th style="width:60px;">Count</th>
      <th>Message</th>
      <th colspan="3">Known Issue</th>
    </tr>
  </thead>
  <tbody>
		<% @msg_show_logs.each do |m| %>
			<% color = m.count >= 4000 ? "danger" : (m.count >= 3000 ? "warning" : "") %>
      <tr>
        <td><%= m.msg_type.name %></td>
				<td><%= m.count %></td>
				<td id="full-message" class="clickable redirect hover <%= color %>" href="<%= msg_show_log_path(m) %>"><%= m.message.gsub(/\s+,\s+/, ',').gsub(/,/, ', ') %></td>
        <td>
					<span class="glyphicon glyphicon-star-empty"></span>
				</td>
        <td>xxxxxxxxxxxx, xxxxxx, xxxxx, xxxx</td>
        <td>
          <button class="btn btn-success btn-xs btn-known-issue-details">Details</button>
				</td>
      </tr>
		<% end %>
  </tbody>
</table>

<div class="row">
	<%= will_paginate @msg_show_logs,
				:renderer => BootstrapPagination::Rails,
				:class => "pagination-sm pagination-condensed pull-right",
				:previous_label => "<<",
				:next_label => ">>" %>
</div>

<div class="modal fade" id="known-issue-modal">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close h4-align" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title">Known Issue Details</h4>
      </div>
      <div class="modal-body">
        <pre id="known-issue-context">
        </pre>
				<button type="button" class="btn btn-default"><span class="glyphicon glyphicon-list"></span> &nbsp;Add</button>
				<button type="button" class="btn btn-default"><span class="glyphicon glyphicon-plus"></span> &nbsp;New</button>
        <hr class="hr-condensed"/>
				<table class="table table-condensed table-hover" id="tbl-known-issue-details">
					<thead>
						<tr>
							<th>#</th>
							<th>Name</th>
							<th>Patterns</th>
              <th></th>
              <th></th>
						</tr>
					</thead>
					<tbody>
					</tbody>
				</table>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
